From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: John Doe <john.doe@somewhere.on.planet>
Date: Thu, 18 Jul 2024 10:50:39 +0000
Subject: Patching u-boot rk35xx files arch/arm/dts/rk3588s-nanopi-r6c.dts
 configs/nanopi-r6c-rk3588s_defconfig

Signed-off-by: John Doe <john.doe@somewhere.on.planet>
---
 arch/arm/dts/rk3588s-nanopi-r6c.dts  | 29 +-------
 configs/nanopi-r6c-rk3588s_defconfig | 37 +---------
 2 files changed, 5 insertions(+), 61 deletions(-)

diff --git a/arch/arm/dts/rk3588s-nanopi-r6c.dts b/arch/arm/dts/rk3588s-nanopi-r6c.dts
index 5e6d2c9a3a..d6e558257a 100644
--- a/arch/arm/dts/rk3588s-nanopi-r6c.dts
+++ b/arch/arm/dts/rk3588s-nanopi-r6c.dts
@@ -1,36 +1,9 @@
 /dts-v1/;
 #include "rk3588.dtsi"
 #include "rk3588-u-boot.dtsi"
+#include <dt-bindings/input/input.h>
 
 / {
 	model = "RK3588S NanoPi R6C";
 	compatible = "rockchip,rk3588s-nanopi-r6c", "rockchip,rk3588";
-
-	chosen: chosen {
-		stdout-path = &uart2;
-		u-boot,spl-boot-order = &sdmmc, &sdhci;
-	};
-
-	aliases: aliases {
-		mmc0 = &sdhci;
-		mmc1 = &sdmmc;
-	};
-
-	vcc5v0_sys: vcc5v0-sys {
-		u-boot,dm-pre-reloc;
-		compatible = "regulator-fixed";
-		regulator-name = "vcc5v0_sys";
-		regulator-min-microvolt = <5000000>;
-		regulator-max-microvolt = <5000000>;
-		regulator-always-on;
-		regulator-boot-on;
-	};
-};
-
-&crypto {
-	status = "okay";
-};
-
-&uart2 {
-	status = "okay";
 };
diff --git a/configs/nanopi-r6c-rk3588s_defconfig b/configs/nanopi-r6c-rk3588s_defconfig
index d9b7a91aed..9a30e94bac 100644
--- a/configs/nanopi-r6c-rk3588s_defconfig
+++ b/configs/nanopi-r6c-rk3588s_defconfig
@@ -5,20 +5,19 @@ CONFIG_SPL_LIBCOMMON_SUPPORT=y
 CONFIG_SPL_LIBGENERIC_SUPPORT=y
 CONFIG_SYS_MALLOC_F_LEN=0x80000
 CONFIG_SPL_FIT_GENERATOR="arch/arm/mach-rockchip/make_fit_atf.sh"
 CONFIG_ROCKCHIP_RK3588=y
 CONFIG_ROCKCHIP_FIT_IMAGE=y
-CONFIG_ROCKCHIP_HWID_DTB=y
 CONFIG_ROCKCHIP_VENDOR_PARTITION=y
+CONFIG_USING_KERNEL_DTB_V2=y
 CONFIG_ROCKCHIP_FIT_IMAGE_PACK=y
 CONFIG_ROCKCHIP_NEW_IDB=y
 CONFIG_LOADER_INI="RK3588MINIALL.ini"
 CONFIG_TRUST_INI="RK3588TRUST.ini"
 CONFIG_PSTORE=y
 CONFIG_SPL_SERIAL_SUPPORT=y
 CONFIG_SPL_DRIVERS_MISC_SUPPORT=y
-CONFIG_TARGET_EVB_RK3588=y
 CONFIG_SPL_LIBDISK_SUPPORT=y
 CONFIG_SPL_SPI_FLASH_SUPPORT=y
 CONFIG_SPL_SPI_SUPPORT=y
 CONFIG_DEFAULT_DEVICE_TREE="rk3588s-nanopi-r6c"
 CONFIG_DEBUG_UART=y
@@ -27,11 +26,11 @@ CONFIG_FIT_IMAGE_POST_PROCESS=y
 CONFIG_FIT_HW_CRYPTO=y
 CONFIG_SPL_LOAD_FIT=y
 CONFIG_SPL_FIT_IMAGE_POST_PROCESS=y
 CONFIG_SPL_FIT_HW_CRYPTO=y
 # CONFIG_SPL_SYS_DCACHE_OFF is not set
-CONFIG_BOOTDELAY=0
+CONFIG_BOOTDELAY=1
 CONFIG_SYS_CONSOLE_INFO_QUIET=y
 # CONFIG_DISPLAY_CPUINFO is not set
 CONFIG_ANDROID_BOOTLOADER=y
 CONFIG_ANDROID_AVB=y
 CONFIG_ANDROID_BOOT_IMAGE_HASH=y
@@ -60,12 +59,12 @@ CONFIG_CMD_DTIMG=y
 # CONFIG_CMD_FPGA is not set
 CONFIG_CMD_GPT=y
 # CONFIG_CMD_LOADB is not set
 # CONFIG_CMD_LOADS is not set
 CONFIG_CMD_BOOT_ANDROID=y
+CONFIG_CMD_BOOT_ROCKCHIP=y
 CONFIG_CMD_MMC=y
-CONFIG_CMD_PCI=y
 CONFIG_CMD_SF=y
 CONFIG_CMD_SPI=y
 CONFIG_CMD_USB=y
 CONFIG_CMD_USB_MASS_STORAGE=y
 # CONFIG_CMD_ITEST is not set
@@ -140,23 +139,17 @@ CONFIG_SPI_FLASH_XTX=y
 CONFIG_SPI_FLASH_MTD=y
 CONFIG_DM_ETH=y
 CONFIG_DM_ETH_PHY=y
 CONFIG_DWC_ETH_QOS=y
 CONFIG_GMAC_ROCKCHIP=y
-CONFIG_NVME=y
-CONFIG_PCI=y
-CONFIG_DM_PCI=y
-CONFIG_DM_PCI_COMPAT=y
-CONFIG_PCIE_DW_ROCKCHIP=y
 CONFIG_PHY_ROCKCHIP_INNO_USB2=y
 CONFIG_PHY_ROCKCHIP_SAMSUNG_HDPTX=y
 CONFIG_PHY_ROCKCHIP_USBDP=y
 CONFIG_PINCTRL=y
 CONFIG_SPL_PINCTRL=y
 CONFIG_DM_FUEL_GAUGE=y
 CONFIG_POWER_FG_CW201X=y
-CONFIG_POWER_FG_CW221X=y
 CONFIG_DM_PMIC=y
 CONFIG_PMIC_SPI_RK8XX=y
 CONFIG_DM_POWER_DELIVERY=y
 CONFIG_TYPEC_TCPM=y
 CONFIG_TYPEC_TCPCI=y
@@ -167,12 +160,10 @@ CONFIG_DM_REGULATOR_FIXED=y
 CONFIG_DM_REGULATOR_GPIO=y
 CONFIG_REGULATOR_RK860X=y
 CONFIG_REGULATOR_RK806=y
 CONFIG_CHARGER_BQ25700=y
 CONFIG_CHARGER_BQ25890=y
-CONFIG_CHARGER_SC8551=y
-CONFIG_CHARGER_SGM41542=y
 CONFIG_DM_CHARGE_DISPLAY=y
 CONFIG_CHARGE_ANIMATION=y
 CONFIG_PWM_ROCKCHIP=y
 CONFIG_RAM=y
 CONFIG_SPL_RAM=y
@@ -190,11 +181,10 @@ CONFIG_ROCKCHIP_SPI=y
 CONFIG_ROCKCHIP_SFC=y
 CONFIG_SYSRESET=y
 CONFIG_USB=y
 CONFIG_USB_XHCI_HCD=y
 CONFIG_USB_XHCI_DWC3=y
-CONFIG_USB_XHCI_PCI=y
 CONFIG_USB_EHCI_HCD=y
 CONFIG_USB_EHCI_GENERIC=y
 CONFIG_USB_OHCI_HCD=y
 CONFIG_USB_OHCI_GENERIC=y
 CONFIG_USB_DWC3=y
@@ -207,19 +197,14 @@ CONFIG_USB_GADGET_VENDOR_NUM=0x2207
 CONFIG_USB_GADGET_PRODUCT_NUM=0x350a
 CONFIG_USB_GADGET_DOWNLOAD=y
 CONFIG_DM_VIDEO=y
 CONFIG_DISPLAY=y
 CONFIG_DRM_ROCKCHIP=y
-CONFIG_DRM_MAXIM_MAX96745=y
-CONFIG_DRM_MAXIM_MAX96752F=y
-CONFIG_DRM_MAXIM_MAX96755F=y
-CONFIG_DRM_PANEL_MAXIM_DESERIALIZER=y
-CONFIG_DRM_ROHM_BU18XL82=y
 CONFIG_DRM_ROCKCHIP_DW_HDMI_QP=y
 CONFIG_DRM_ROCKCHIP_DW_MIPI_DSI2=y
-CONFIG_DRM_ROCKCHIP_ANALOGIX_DP=y
 CONFIG_DRM_ROCKCHIP_DW_DP=y
+CONFIG_DRM_ROCKCHIP_ANALOGIX_DP=y
 CONFIG_DRM_ROCKCHIP_SAMSUNG_MIPI_DCPHY=y
 CONFIG_PHY_ROCKCHIP_SAMSUNG_HDPTX_HDMI=y
 CONFIG_USE_TINY_PRINTF=y
 CONFIG_LIB_RAND=y
 CONFIG_SPL_TINY_MEMSET=y
@@ -239,19 +224,5 @@ CONFIG_AVB_LIBAVB_ATX=y
 CONFIG_AVB_LIBAVB_USER=y
 CONFIG_RK_AVB_LIBAVB_USER=y
 CONFIG_OPTEE_CLIENT=y
 CONFIG_OPTEE_V2=y
 CONFIG_OPTEE_ALWAYS_USE_SECURITY_PARTITION=y
-CONFIG_PHY_ROCKCHIP_NANENG_COMBOPHY=y
-CONFIG_CMD_SETEXPR=y
-CONFIG_PHY_ROCKCHIP_SNPS_PCIE3=y
-CONFIG_SYS_PROMPT="opi# "
-CONFIG_AHCI=y
-CONFIG_CMD_SCSI=y
-CONFIG_DM_SCSI=y
-CONFIG_DWC_AHCI=y
-CONFIG_LIBATA=y
-CONFIG_SCSI_AHCI=y
-CONFIG_SCSI=y
-CONFIG_USING_KERNEL_DTB_V2=y
-CONFIG_MTD_BLK_U_BOOT_OFFS=0x400
-CONFIG_ROCKCHIP_EMMC_IOMUX=y
\ No newline at end of file
-- 
Created with Armbian build tools https://github.com/armbian/build

